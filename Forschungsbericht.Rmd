---
title: "226305 Forschungsbericht"
subtitle: "Analyse des SpaceX Netzwerkes"
date: "WS 20/21"
author: "Ricarda Müterthies, Sebastian Brüne, Raouf Allaham, Tom Beyer | rm057@hdm-stuttgart.de, sb274@hdm-stuttgart.de, ma106@hdm-stuttgart.de, tb145@hdm-stuttgart.de"
output: html_notebook
---

# Einleitung
Wir wollen die interne Struktur des Vorstandes von SpaceX analysieren im Bezug auf die Verbindung zu anderen Raumfahrtunternehmen. Unser Ziel ist die Darstellung der Struktur der einzelnen Personen und wie sie zu verschiedenen Unternehmen beruflich stehen.


# Vorarbeiten und vergleichbare Studien
## Forschungsstand

Das Forschungsdesign lehnt sich zum einen an die lange Tradition der Netzwerkanalyse in der Schulforschung an (XXXX). Es greift zudem die klassische Studie von Krackhardt (XXXX) auf, der ein Ratsuche und Unterstützungsnetzwerk in einem Unternehmen untersuchte. 

## Arbeitshypothesen

Anfangshypothese: Alles miteinander verknüpft, viele Überschneidungen der Knoten, Raumfahrtunternehmen haben änhliche Vorstände. Vorstände arbeiten mehr zusammen und kennen sich mehr, Verknüpfungen sind breiter
Zwischenergebnis: Nach ersten Recherchen stellte sich das Gegenteil heraus... wenig Konktakte, einzelne Cluster, wenig Verknüpfungen der verschiedenen Knoten der Raumfahrtunternehmen
Endergebnis: Nach intensiver Recherche stellte sich heraus dass die Unternehmen nicht gut zueinander vernetzt sind. Akteure sind nur durch einzelne Ereignise verbunden (zb Uni, Hobbys, Engagements). Fast gar keine Verknüpfungen verhanden.

# Datenerhebung: Zugang, Bereinigung und Codebuch

## Zugang
LinkedIn, diverse Websiten: Boards, Unternehmenswebsiten, Vorstände etc..

## Bereinigung des Datensatzes
Keine Anonymisierung nötig da es sich um öffentliche Personen handelt

## Codebuch
Das [Codebuch](https://github.com/tomllb/SpaceXNetzwerk/blob/master/Codebuch.md) beschreibt die Variablen, Relationen und Gewichte des Netzwerks und ist ebenfalls auf Github hinterlegt. ( abändern in passende Begriffe )

# Analyse und Interpretation

# Das Gesamtnetzwerk

Das gerichtete Gesamtnetzwerk umfasst XX Knoten und XXX Beziehungen (siehe igraph-Objekt).

```{r 1. Daten zum Netzwerk, echo=FALSE, message=FALSE, warning=FALSE, paged.print=TRUE}

library(igraph)

# Einlesen der Edge- und Nodelist
el <- read.csv("https://raw.githubusercontent.com/tomllb/SpaceXNetzwerk/master/edge.csv", header=T, as.is=T, sep = ",")
nodes <- read.csv("https://raw.githubusercontent.com/tomllb/SpaceXNetzwerk/master/node.csv", header=T, as.is=T, sep = ",")

# Matrix erstellen
edgematrix <-as.matrix(el)

# Zusammenführen von Edge- und Nodelist als igraph-Objekt space
space <- graph_from_data_frame(d=edgematrix, vertices=nodes, directed=T)
space

#Parameter zu Beschreibung des Netzwerks:

#Das Netzwerk besteht aus 71 Komponenten
components(space)

##Die Dichte des Netzwerks beträgt 0,015
edge_density(space,
             loops=FALSE)

##Der Umfang des Netzwerks ist 2
diameter(space)

##Pfaddistanzen: Highest: Elon Musk & ISS 
farthest_vertices(space)

```

Das SpaceX besteht aus 71 Komponenten. Die Dichte im Netzwerk beträgt 0,15% Prozent von allen möglichen Verbindungen. Die maximale Pfaddistanz beträgt 2 Schritte.

```{r 2. Erste Visualisierung des SpaceX Netzwerkes, fig.height=5, fig.width=10, message=TRUE, warning=TRUE, paged.print=TRUE}
library(igraph)
el <- read.csv("https://raw.githubusercontent.com/tomllb/SpaceXNetzwerk/master/edge.csv", header=T, as.is=T, sep = ",")
nodes <- read.csv("https://raw.githubusercontent.com/tomllb/SpaceXNetzwerk/master/node.csv", header=T, as.is=T, sep = ",")
edgematrix <-as.matrix(el)
space <- graph_from_data_frame(d=edgematrix, vertices=nodes, directed=T)

#Erste Visualisierung des SpaceX Netzwerkes zur Darstellung


plot(space,
     edge.arrow.size=0.5,
     layout=layout_nicely,
     main="SpaceX: Erste Visualiserung des Netzwerks",
     asp=0,
     vertex.size=2)
```

*Erste Visualiserung des Gesamtnetzwerk*
Die erste Visualiserung zeigt, dass das Gesamtnetzwerk aus vielen einzelnen Gruppen besteht (Cluster), welche sich bilden, aber jeweils mit einem Hauptakteur verbunden sind. Dabei ist zu beachten, dass hier keine Unterscheidung zwischen Akteuren vorliegt. Alle werden gleich behandelt und gleich visualisiert. 



```{r 3. Vertexattribute}
#Netzwerkattribute: Node
list.vertex.attributes(space) 
#Auslesen der Attribute
vertex.attributes(space)$name
vertex.attributes(space)$sex
vertex.attributes(space)$type

```

Das SpaceX Netzwerk besitzt folgende Vertex Attribute:
 
*Vertex-Attribute* 
- name: Name des Knotens 
- sex:  1 male, 2 female, 3 diverse
- type: Unterscheidung zwischen Mensch, Unternehmen und Projekt: 1=Mensch, 2=Unternehmen, 3=Projekt


```{r 4. Edgeattribute}
#Netzwerkattribute: Edge
list.edge.attributes(space)
#Auslesen der Attribute
edge.attributes(space)$activ
edge.attributes(space)$time
edge.attributes(space)$position

```

Das SpaceX Netzwerk besitzt folgende Edge Attribute:

*Edge-Attribute*
- position: Position im Vorstand: CEO/Vorstand = 1, Präsident/in = 2, Vizepräsident/in = 3,     Chefingeniur/Landingengineer = 4, 5=Director/Generel/Chief/Vorstandsvorsitzende/r, 6=Member
- time: Zeit im Vorstand: 1 = ein bis vier Jahre, 2 = fünf bis neun Jahre, 3 = zehn Jahre oder länger
- activ: Zeigt ob Person aktiv oder passiv im Unternehmen ist: 1=aktiv, 2=war im Unternehmen

```{r 5. Erstellen Teilnetzwerk nach Geschlechtern, fig.height=10, fig.width=10, message=FALSE, warning=FALSE, paged.print=FALSE}

el <- read.csv("https://raw.githubusercontent.com/tomllb/SpaceXNetzwerk/master/edge.csv", header=T, as.is=T, sep = ",")
nodes <- read.csv("https://raw.githubusercontent.com/tomllb/SpaceXNetzwerk/master/node.csv", header=T, as.is=T, sep = ",")
edgematrix <-as.matrix(el)

spacegeschlecht <- graph_from_data_frame(d=edgematrix, vertices=nodes, directed=T)
spacegeschlecht

# Defnierung der Farben
V(spacegeschlecht)[V(spacegeschlecht)$sex == 2]$color <- "pink" #weiblich
V(spacegeschlecht)[V(spacegeschlecht)$sex == 2]$name <- "W" 
V(spacegeschlecht)[V(spacegeschlecht)$sex == 1]$color <- "lightblue" #männlich
V(spacegeschlecht)[V(spacegeschlecht)$sex == 1]$name <- "M" #männlich


#Visualisierung des Netzwerkes
plot(spacegeschlecht,
     
     edge.arrow.size=.1,
     vertex.size=5,
     layout=layout_with_kk,
     edge.curved=curve_multiple(spacegeschlecht),
     main="Netzwerk nach Geschlechtern",
     sub="Pink=Weiblich, Blau=Männlich")


```

Die Teilnetzwerke zeigen den Frauen- und Männeranteil im gesamten Netzwerk. Ganz klar sticht die Dominanz des männlichen Geschlechts in Raumfahrtunternehmen heraus.

```{r 6. Aufteilen des SpaceX Netzwerks durch Positionen im Unternehmen, fig.height=5, fig.width=10, message=FALSE, warning=FALSE, paged.print=FALSE}



```

```{r 7. Komponenten im Netzwerk, fig.height=5, fig.width=10, message=FALSE, warning=FALSE, paged.print=FALSE}
# Komponentenanzahl im Netzwerk
count_components(space)

#Gruppenaufteilung 
space_gr <- groups(components(space))
space_gr

# Unteranalyse der Hauptkomponente
is_connected(space)

# Analyse der Verteilung der Komponenenten
components(space, mode = c("weak", "strong"))

# Analyse der starken Komponenten
components(space, mode = "strong")

# Anzahl der Komponenten
count_components(space)

# Aufteilung der Komponenten
comp_space <- components(space)
groups(comp_space)



```

```{r 8. Cluster im Netzwerk, fig.height=7, fig.width=12, message=FALSE, warning=FALSE, paged.print=FALSE}
# Anzahl der Clusters im Netzwerk
clusters(space)

#Komponenten werden aufgetrennt
space_cluster <- decompose.graph(space)
space_cluster

#...und neu benannt
space_cluster1 <- space_cluster [[1]]
space_cluster1

#Erstellung eines Walktrap-Cluster
?cluster_walktrap()

cl <- cluster_walktrap(space_cluster1)
modularity(cl)
membership(cl)

plot(cl, space_cluster1, 
     main="Walktrapcluster des Netzwerkes",
     vertex.size=5,
     vertex.label=NA)

#Erstellung eines Edge Betweenness Cluster
?cluster_edge_betweenness()

eb <- cluster_edge_betweenness(space_cluster1)
eb

plot(eb, space_cluster1, 
     main="Edge Betweenness Cluster des Netzwerkes",
     vertex.size=5,
     vertex.label=NA)



#Zusatz: Degree und Betweenness-Zentralität

degree1 <- degree(space, normalized=T)
degree1

betweenness1 <- betweenness(space, normalized=T)
betweenness1
 
par(mfrow=c(1,2), mar=c(0,0,2,1)) 

#Visualisierung der Werte
plot(space,
     layout=layout_nicely,
     vertex.size=ds*50,
     vertex.label=NA,
     vertex.color="blue",
     vertex.frame.color=NA,
     edge.color="black",
     main = "Degree-Verteilung")

plot(space,
     layout=layout_nicely,
     vertex.size=bs*50,
     vertex.label=NA,
     vertex.color="orange",
     vertex.frame.color=NA,
     edge.color="black",
     main = "Closeness")

par(mfrow=c(1,2), mar=c(0,0,2,1)) 
par(mfrow=c(1,1), mar=c(0,0,2,1)) 

```
Was sagen diese Cluster aus??????? XXXXXXXXXXXXX


```{r 9. Cliquen im Netzwerk, fig.height=7, fig.width=12, message=FALSE, warning=FALSE, paged.print=FALSE}
triad_census(space)

largest_cliques(space)

max_cliques(space)

```

```{r 10. Ego Netzwerk höhster Degreewert & höhster Betweennesswert, fig.height=5, fig.width=10, message=FALSE, warning=FALSE, paged.print=FALSE}
#SpaceX hat die meisten verbundenen Knoten (22)
ego_size(space)

#SpaceX hat als Knoten den höchsten Degree Wert (21)
degree(space)

#SpaceX hat auch den höhsten Betweennesswert (89)
betweenness(space)

#Erstellung des Ego-Netzwerkes von SpaceX
spaceXego <- make_ego_graph(space, order = 1, nodes = V(space)$name == "SPACEX", mode ="all")
spaceXego

spaceXego1 <- spaceXego [[1]]
spaceXego1

V(spaceXego1)[V(spaceXego1)$name == "SPACEX"]$color <- "red"

plot(spaceXego1,
     layout=layout_with_kk,
     vertex.label=V(space)$ID,
     vertex.label.color="black",
     vertex.frame.color="white",
     edge.color="black",
     main="Ego Netzwerk von SpaceX")
```
Kleine Erklärung zu Degree und Betweenness Werten!! XXXXXXXXXXXXx

```{r 11. Zentralitätsmaße im Netzwerk, fig.height=7, fig.width=12, message=FALSE, warning=FALSE, paged.print=FALSE}


```

```{r 12. Closeness, Eigenvector und K-Core im Netzwerk, fig.height=7, fig.width=12, message=FALSE, warning=FALSE, paged.print=FALSE}
#Closenesswert
closeness(space)

#Eigenvector
eigen_centrality(space)

#K-Core
coreness(space)

```



## 4.6 Transitivität und Homophilie im Netzwerk

### 4.6.1 Transitivität

### 4.6.2 Homophilie


## 5.1 Gesamtnetzwerk & Visualisierung
```{r 12. Gesamtnetzwerk & Visualiserung, fig.height=5, fig.width=10, message=FALSE, warning=FALSE, paged.print=FALSE}


```


### 5.1.1 Gesamtvisualisierung

### 5.1.2 Multiplexes Netzwerk
Um das etwas übersichtlicher darszustellen, bietet sich bei einem Netzwerk mit verschiedenen Beziehungsarten an, diese farblich zu unterscheiden. 


## 5.2 Vergleich der Teilnetzwerke


## 5.3 Wichtige Akteure im Netzwerk

# 6. Diskussion: Fazit, Limitationen und Ausblick

# Anlage
## Literatur

## Codebuch

## Datenmaterial und Skript

## Team, Arbeitsaufwand und Lessons Learned



